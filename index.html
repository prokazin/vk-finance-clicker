<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Finance Clicker — Full Exchange</title>
  <link rel="stylesheet" href="style.css" />
  <!-- TradingView Lightweight Charts -->
  <script src="https://unpkg.com/lightweight-charts@4.4.0/dist/lightweight-charts.standalone.production.js"></script>
</head>
<body>
  <div class="app">
    <header>
      <h1>Finance Clicker — Exchange (Full)</h1>
      <div class="top-right">
        <div>Рубли: <b id="rub">1000</b> ₽</div>
        <div>USDT: <b id="usdt">0.00</b></div>
        <div>BTC: <b id="btcBal">0.000000</b></div>
      </div>
    </header>

    <main>
      <aside class="left">
        <section class="card clicker">
          <h2>Кликер — заработай рубли</h2>
          <div class="row">
            <input id="clickStake" type="number" value="50" min="1" />
            <select id="clickType">
              <option value="safe">Безопасный</option>
              <option value="normal" selected>Стандарт</option>
              <option value="risk">Риск</option>
            </select>
          </div>
          <button id="clickBtn" class="primary">Сделать трейд (клик)</button>
          <div id="clickRes" class="muted">—</div>
        </section>

        <section class="card wallet">
          <h3>Конвертация</h3>
          <div class="row">
            <input id="convAmount" type="number" value="100" min="1" />
            <button id="rubToUsd">₽ → $</button>
            <button id="usdToRub">$ → ₽</button>
          </div>
          <div class="row small"><span id="fxRate">Курс: — ₽/$</span></div>
        </section>

        <section class="card deposit">
          <h3>Вклады (депозит)</h3>
          <div class="row">
            <input id="depAmount" type="number" value="10" min="1" />
            <button id="openDep">Открыть вклад ($)</button>
          </div>
          <div id="depInfo" class="muted">Вкладов: 0</div>
        </section>

        <section class="card orders">
          <h3>Ручная торговля (BTC/USDT)</h3>
          <div class="row">
            <input id="orderAmount" type="number" placeholder="USDT" value="10" />
            <select id="orderType">
              <option value="market">Market</option>
              <option value="limit">Limit</option>
            </select>
            <input id="orderPrice" type="number" placeholder="Price (для Limit)" step="0.1" />
          </div>
          <div class="row">
            <button id="buyBtn" class="primary">Купить BTC</button>
            <button id="sellBtn" class="danger">Продать BTC</button>
          </div>
        </section>
      </aside>

      <section class="center">
        <div class="card chart">
          <div id="chartToolbar">
            <select id="pairSelect">
              <option value="BTCUSDT" selected>BTC/USDT</option>
              <option value="ETHUSDT">ETH/USDT</option>
              <option value="RUBUSD">RUB/USD (вирт)</option>
            </select>
            <select id="tfSelect">
              <option value="1m">1m</option>
              <option value="5m">5m</option>
              <option value="15m">15m</option>
            </select>
            <span id="marketStatus" class="muted">Market: connecting...</span>
          </div>
          <div id="chartContainer"></div>
        </div>

        <div class="card trades">
          <h3>Позиции & История</h3>
          <div id="positionsList"></div>
          <h4>История</h4>
          <ul id="historyList"></ul>
        </div>
      </section>

      <aside class="right">
        <section class="card leaderboard">
          <h3>Лидерборд (локально)</h3>
          <ol id="leaderboard"></ol>
        </section>

        <section class="card stats">
          <h3>Статистика</h3>
          <div>Баланс (в ₽): <b id="totalRub">—</b></div>
          <div>PNL (в $): <b id="totalPnl">$0.00</b></div>
        </section>
      </aside>
    </main>

    <footer>
      <small>Демо-версия — данные крипто через публичный WebSocket Binance, курс RUB↔USD через exchangerate.host. Для продакшена — оформлять API/права.</small>
    </footer>
  </div>

  <script src="market.js"></script>
  <script src="script.js"></script>
</body>
</html>
